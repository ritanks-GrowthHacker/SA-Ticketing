### Test Comment API Access Control
### This file tests the RBAC implementation for nested comments

@baseUrl = http://localhost:3000
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwYjMwYzZhNS04ODNkLTQzN2EtOWU2NS02YzgwNDg2NjNmMGYiLCJ1c2VySWQiOiIwYjMwYzZhNS04ODNkLTQzN2EtOWU2NS02YzgwNDg2NjNmMGYiLCJvcmdhbml6YXRpb25JZCI6IjE0NTFjMmQ0LTk3M2YtNGE5MC05OWQ5LTZjYWViZWY1Yjc3ZCIsIm9yZ19pZCI6IjE0NTFjMmQ0LTk3M2YtNGE5MC05OWQ5LTZjYWViZWY1Yjc3ZCIsInByb2plY3RfaWQiOiJlMjY3MzA4Yi1lOGQzLTQxMWEtYWRmZS02ZTM5ZDQ1YWExMWEiLCJwcm9qZWN0X25hbWUiOiJ0ZXN0IDIiLCJyb2xlIjoiTWVtYmVyIiwicm9sZXMiOlsiTWVtYmVyIl0sInJvbGVfaWQiOiJkZThhNjJjZi0zNWUyLTRjNDItODE5Yy0xMmE5NTg4N2Q1YjEiLCJpYXQiOjE3NjIxNTEwMjAsImV4cCI6MTc2MjIzNzQyMH0.J4MZe3r4rV5tGbdZn3N4xHgQaCu6Tk9XwJAxqOJmG_c

### 1. Test getting comments for a specific ticket (should work if user has access)
GET {{baseUrl}}/api/ticket-comments?ticket_id=PLACEHOLDER_TICKET_ID
Authorization: Bearer {{token}}
Content-Type: application/json

### 2. Test creating a comment on a ticket (should work if user has access)
POST {{baseUrl}}/api/ticket-comments
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "ticket_id": "PLACEHOLDER_TICKET_ID",
  "content": "This is a test comment to verify RBAC access control works properly."
}

### 3. Test accessing a ticket the user shouldn't have access to
GET {{baseUrl}}/api/ticket-comments?ticket_id=non-existent-or-unauthorized-ticket-id
Authorization: Bearer {{token}}
Content-Type: application/json

### 4. Test creating comment on unauthorized ticket
POST {{baseUrl}}/api/ticket-comments
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "ticket_id": "non-existent-or-unauthorized-ticket-id",
  "content": "This should fail with access denied."
}